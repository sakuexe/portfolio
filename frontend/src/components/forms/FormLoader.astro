---
interface Props {
  text: string;
}

const { text } = Astro.props;
---

<style is:inline>
form:not(.loading) .form-loader {
  opacity: 0;
  pointer-events: none;
  user-select: none;
}
</style>

<style>
.form-loader {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: color-mix(in srgb, var(--color-primary) 95%, transparent);

  @media (prefers-reduced-motion: no-preference) {
    transition: var(--default-transition);
  }
}

.form-loader > p:first-of-type {
  font-size: 1.75rem;
}

.form-loader > svg {
  width: min(100%, 320px);
  fill: transparent;
  stroke: var(--color-secondary);
}
</style>

<!-- loading spinner -->
<div class="form-loader">
  <p>{ text }</p>
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 300 150">
    <path stroke-width="15" stroke-dasharray="300 385" stroke-dashoffset="0"
      d="M275 75c0 31-27 50-50 50-58 0-92-100-150-100-28 0-50 22-50 50s23 50 50 50c58 0 92-100 150-100 24 0 50 19 50 50Z">
      <animate attributeName="stroke-dashoffset" calcMode="spline" dur="2.25" values="685;-685"
        keySplines="0 0 1 1" repeatCount="indefinite"></animate>
    </path>
  </svg>
  <p>Hold on tight, sunshine</p>
</div>
